{% extends "base.html" %}

{% block styles %}
    {{ super() }}
    <link rel="stylesheet" href="https://s.electerious.com/basicLightbox/dist/basicLightbox.min.css" />
{% endblock styles %}

{% block libs %}
    {{ super() }}
    <script src="https://s.electerious.com/basicLightbox/dist/basicLightbox.min.js"></script>
{% endblock libs %}

{% block scripts %}
    {{ super() }}
    <script>
        document.querySelector('[data-toggle="lightbox"]').onclick = function (event)
        {
            var svg = event.currentTarget.href;

            // Only SVG files should be handled
            if (!svg.endsWith('.svg')) {
                return;
            }

            event.preventDefault();
            var xhr = new XMLHttpRequest();
            xhr.open('GET', svg, true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    basicLightbox.create('<div class="svg-lightbox">' + xhr.responseText + '</div>').show();
                }
            };
            xhr.send(null);
        }
    </script>
{% endblock scripts %}

{% block config %}
    {{ super() }}
    {% if "localsearch" in config["plugins"] %}
        <script src="https://unpkg.com/iframe-worker/polyfill"></script>
        <script src="{{ 'search/search_index.js' | url }}"></script>
    {% endif %}
{% endblock %}
